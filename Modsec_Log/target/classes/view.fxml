<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ListCell?>

<VBox xmlns:fx="http://javafx.com/fxml" fx:controller="controller.ModSecController" spacing="20" alignment="CENTER" style="-fx-padding: 20;">
    <!-- Tiêu đề của ứng dụng -->
    <Label text="Log Analysis Application" style="-fx-font-size: 24px; -fx-font-weight: bold;" />

    <!-- Các nút điều hướng -->
    <VBox spacing="10" alignment="CENTER">
        <Button fx:id="btnCalculateRequests" text="Calculate Total Requests" style="-fx-pref-width: 200px;"/>
        <Button fx:id="btnFilterLogs" text="Filter Logs" style="-fx-pref-width: 200px;"/>
        <Button fx:id="btnTimeRange" text="Count Requests by Time Range" style="-fx-pref-width: 200px;"/>
        <Button fx:id="btnLoginChart" text="Display Login Activity Chart" style="-fx-pref-width: 200px;"/>
        <Button fx:id="btnExit" text="Exit" style="-fx-pref-width: 200px;"/>
    </VBox>

    <!-- Label hiển thị thông báo trạng thái -->
    <Label fx:id="statusLabel" text="Please select an option from the menu." style="-fx-font-size: 16px;"/>

    <!-- Các trường nhập liệu cho "Tìm kiếm log theo trường" -->
    <VBox fx:id="filterLogsSection" spacing="10" visible="false">
        <Label text="Enter Field to Filter (e.g., clientip, requesturi, etc.):"/>
        <TextField fx:id="fieldInput" promptText="Field (clientip, requesturi, etc.)" style="-fx-pref-width: 300px;"/>

        <Label text="Enter Value to Filter By:"/>
        <TextField fx:id="valueInput" promptText="Value" style="-fx-pref-width: 300px;"/>

        <Button fx:id="btnSearchLogs" text="Search" onAction="#handleSearchLogs" style="-fx-pref-width: 100px;"/>
    </VBox>

    <!-- Danh sách các log tìm được -->
    <ListView fx:id="logListView" visible="false" style="-fx-pref-width: 800px; -fx-pref-height: 200px;">
        <!-- Danh sách các log sẽ hiển thị ở đây -->
    </ListView>


    <!-- Biểu đồ Login Activity -->
    <LineChart fx:id="loginChart" prefWidth="800" prefHeight="400">
        <xAxis>
            <NumberAxis label="Hour" />
        </xAxis>
        <yAxis>
            <NumberAxis label="Logins" />
        </yAxis>
    </LineChart>
</VBox>
